(function(R,U){typeof exports=="object"&&typeof module<"u"?module.exports=U(require("svelte"),require("three")):typeof define=="function"&&define.amd?define(["svelte","three"],U):(R=typeof globalThis<"u"?globalThis:R||self,R["3d-cube"]=U(R.Svelte,R.THREE))})(this,function(R,U){"use strict";function le(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const C=le(U),ie="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ie);const ue=2,st=Symbol(),bt=!1;var se=Array.prototype.indexOf,Et=Object.defineProperty;function fe(t){for(var e=0;e<t.length;e++)t[e]()}function ae(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}const g=2,ft=4,xt=8,at=16,B=32,I=64,yt=128,x=256,X=512,w=1024,y=2048,M=4096,$=8192,P=16384,kt=32768,oe=1<<18,ot=1<<19,Tt=1<<20,ct=1<<21,St=1<<22,D=1<<23,ce=Symbol("$state"),vt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ve(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function _e(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function he(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Rt(t){return t===this.v}let pe=!1,T=null;function tt(t){T=t}function de(t,e=!1,n){T={p:T,c:null,e:null,s:t,x:null,l:null}}function we(t){var e=T,n=e.e;if(n!==null){e.e=null;for(var r of n)Pe(r)}return T=e.p,{}}function me(){return!0}const ge=new WeakMap;function be(t){var e=o;if(e===null)return c.f|=D,t;if(e.f&kt)_t(t,e);else{if(!(e.f&yt))throw!e.parent&&t instanceof Error&&Ct(t),t;e.b.error(t)}}function _t(t,e){for(;e!==null;){if(e.f&yt)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&Ct(t),t}function Ct(t){const e=ge.get(t);e&&(Et(t,"message",{value:e.message}),Et(t,"stack",{value:e.stack}))}let et=[];function Ee(){var t=et;et=[],fe(t)}function xe(t){et.length===0&&queueMicrotask(Ee),et.push(t)}function ye(){for(var t=o.b;t!==null&&!t.has_pending_snippet();)t=t.parent;return t===null&&ve(),t}function ke(t){var e=g|y,n=c!==null&&c.f&g?c:null;return o===null||n!==null&&n.f&x?e|=x:o.f|=ot,{ctx:T,deps:null,effects:null,equals:Rt,f:e,fn:t,reactions:null,rv:0,v:st,wv:0,parent:n??o,ac:null}}function Te(t,e){let n=o;n===null&&_e();var r=n.b,i=void 0,l=De(st),u=null,a=!c;return Le(()=>{try{var s=t()}catch(v){s=Promise.reject(v)}var f=()=>s;i=u?.then(f,f)??Promise.resolve(s),u=i;var h=_,k=r.pending;a&&(r.update_pending_count(1),k||h.increment());const p=(v,O=void 0)=>{u=null,k||h.activate(),O?O!==vt&&(l.f|=D,It(l,O)):(l.f&D&&(l.f^=D),It(l,v)),a&&(r.update_pending_count(-1),k||h.decrement()),Dt()};if(i.then(p,v=>p(null,v||"unknown")),h)return()=>{queueMicrotask(()=>h.neuter())}}),new Promise(s=>{function f(h){function k(){h===i?s(l):f(i)}h.then(k,k)}f(i)})}function Mt(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)rt(e[n])}}function Se(t){for(var e=t.parent;e!==null;){if(!(e.f&g))return e;e=e.parent}return null}function ht(t){var e,n=o;H(Se(t));try{Mt(t),e=Kt(t)}finally{H(n)}return e}function At(t){var e=ht(t);if(t.equals(e)||(t.v=e,t.wv=Yt()),!J)if(q!==null)q.set(t,t.v);else{var n=(A||t.f&x)&&t.deps!==null?M:w;E(t,n)}}function Re(t,e,n){const r=ke;if(e.length===0){n(t.map(r));return}var i=_,l=o,u=Ce(),a=ye();Promise.all(e.map(s=>Te(s))).then(s=>{i?.activate(),u();try{n([...t.map(r),...s])}catch(f){l.f&P||_t(f,l)}i?.deactivate(),Dt()}).catch(s=>{a.error(s)})}function Ce(){var t=o,e=c,n=T;return function(){H(t),W(e),tt(n)}}function Dt(){H(null),W(null),tt(null)}const V=new Set;let _=null,q=null,Ft=new Set,nt=[];function Nt(){const t=nt.shift();nt.length>0&&queueMicrotask(Nt),t()}let Y=[],pt=null,dt=!1;class G{current=new Map;#l=new Map;#i=new Set;#t=0;#a=null;#o=!1;#n=[];#u=[];#r=[];#e=[];#s=[];#c=[];#v=[];skipped_effects=new Set;process(e){Y=[];var n=null;if(V.size>1){n=new Map,q=new Map;for(const[l,u]of this.current)n.set(l,{v:l.v,wv:l.wv}),l.v=u;for(const l of V)if(l!==this)for(const[u,a]of l.#l)n.has(u)||(n.set(u,{v:u.v,wv:u.wv}),u.v=a)}for(const l of e)this.#h(l);if(this.#n.length===0&&this.#t===0){this.#_();var r=this.#r,i=this.#e;this.#r=[],this.#e=[],this.#s=[],_=null,Ot(r),Ot(i),_===null?_=this:V.delete(this),this.#a?.resolve()}else this.#f(this.#r),this.#f(this.#e),this.#f(this.#s);if(n){for(const[l,{v:u,wv:a}]of n)l.wv<=a&&(l.v=u);q=null}for(const l of this.#n)Q(l);for(const l of this.#u)Q(l);this.#n=[],this.#u=[]}#h(e){e.f^=w;for(var n=e.first;n!==null;){var r=n.f,i=(r&(B|I))!==0,l=i&&(r&w)!==0,u=l||(r&$)!==0||this.skipped_effects.has(n);if(!u&&n.fn!==null){if(i)n.f^=w;else if(!(r&w))if(r&ft)this.#e.push(n);else if(r&St){var a=n.b?.pending?this.#u:this.#n;a.push(n)}else it(n)&&(n.f&at&&this.#s.push(n),Q(n));var s=n.first;if(s!==null){n=s;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}}#f(e){for(const n of e)(n.f&y?this.#c:this.#v).push(n),E(n,w);e.length=0}capture(e,n){this.#l.has(e)||this.#l.set(e,n),this.current.set(e,e.v)}activate(){_=this}deactivate(){_=null;for(const e of Ft)if(Ft.delete(e),e(),_!==null)break}neuter(){this.#o=!0}flush(){Y.length>0?Me():this.#_(),_===this&&(this.#t===0&&V.delete(this),this.deactivate())}#_(){if(!this.#o)for(const e of this.#i)e();this.#i.clear()}increment(){this.#t+=1}decrement(){if(this.#t-=1,this.#t===0){for(const e of this.#c)E(e,y),L(e);for(const e of this.#v)E(e,M),L(e);this.#r=[],this.#e=[],this.flush()}else this.deactivate()}add_callback(e){this.#i.add(e)}settled(){return(this.#a??=ae()).promise}static ensure(){if(_===null){const e=_=new G;V.add(_),G.enqueue(()=>{_===e&&e.flush()})}return _}static enqueue(e){nt.length===0&&queueMicrotask(Nt),nt.unshift(e)}}function Me(){var t=z;dt=!0;try{var e=0;for(Ut(!0);Y.length>0;){var n=G.ensure();if(e++>1e3){var r,i;Ae()}n.process(Y),F.clear()}}finally{dt=!1,Ut(t),pt=null}}function Ae(){try{he()}catch(t){_t(t,pt)}}function Ot(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if(!(r.f&(P|$))&&it(r)){var i=_?_.current.size:0;if(Q(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Ht(r):r.fn=null),_!==null&&_.current.size>i&&r.f&Tt)break}}for(;n<e;)L(t[n++])}}function L(t){for(var e=pt=t;e.parent!==null;){e=e.parent;var n=e.f;if(dt&&e===o&&n&at)return;if(n&(I|B)){if(!(n&w))return;e.f^=w}}Y.push(e)}const F=new Map;function De(t,e){var n={f:0,v:t,reactions:null,equals:Rt,rv:0,wv:0};return n}function It(t,e){if(!t.equals(e)){var n=t.v;J?F.set(t,e):F.set(t,n),t.v=e;var r=G.ensure();r.capture(t,n),t.f&g&&(t.f&y&&ht(t),E(t,t.f&x?M:w)),t.wv=Yt(),Pt(t,y),o!==null&&o.f&w&&!(o.f&(B|I))&&(b===null?Ue([t]):b.push(t))}return e}function Pt(t,e){var n=t.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var l=n[i],u=l.f,a=(u&y)===0;a&&E(l,e),u&g?Pt(l,M):a&&L(l)}}var Fe,Ne,Oe;function qt(t){return Ne.call(t)}function Lt(t){return Oe.call(t)}function N(t,e){return qt(t)}function j(t,e=1,n=!1){let r=t;for(;e--;)r=Lt(r);return r}function jt(t){var e=c,n=o;W(null),H(null);try{return t()}finally{W(e),H(n)}}function Ie(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function K(t,e,n,r=!0){var i=o;i!==null&&i.f&$&&(t|=$);var l={ctx:T,deps:null,nodes_start:null,nodes_end:null,f:t|y,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Q(l),l.f|=kt}catch(s){throw rt(l),s}else e!==null&&L(l);var u=n&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&ot)===0;if(!u&&r&&(i!==null&&Ie(l,i),c!==null&&c.f&g&&!(t&I))){var a=c;(a.effects??=[]).push(l)}return l}function Pe(t){return K(ft|Tt,t,!1)}function qe(t){return K(ft,t,!1)}function Le(t){return K(St|ot,t,!0)}function je(t,e=0){return K(xt|e,t,!0)}function ze(t,e=[],n=[]){Re(e,n,r=>{K(xt,()=>t(...r.map(Ve)),!0)})}function zt(t){var e=t.teardown;if(e!==null){const n=J,r=c;Bt(!0),W(null);try{e.call(null)}finally{Bt(n),W(r)}}}function Wt(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&jt(()=>{i.abort(vt)});var r=n.next;n.f&I?n.parent=null:rt(n,e),n=r}}function We(t){for(var e=t.first;e!==null;){var n=e.next;e.f&B||rt(e),e=n}}function rt(t,e=!0){var n=!1;(e||t.f&oe)&&t.nodes_start!==null&&t.nodes_end!==null&&(He(t.nodes_start,t.nodes_end),n=!0),Wt(t,e&&!n),ut(t,0),E(t,P);var r=t.transitions;if(r!==null)for(const l of r)l.stop();zt(t);var i=t.parent;i!==null&&i.first!==null&&Ht(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function He(t,e){for(;t!==null;){var n=t===e?null:Lt(t);t.remove(),t=n}}function Ht(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}let z=!1;function Ut(t){z=t}let J=!1;function Bt(t){J=t}let c=null,S=!1;function W(t){c=t}let o=null;function H(t){o=t}let Z=null,d=null,m=0,b=null;function Ue(t){b=t}let Vt=1,lt=0,A=!1;function Yt(){return++Vt}function it(t){var e=t.f;if(e&y)return!0;if(e&M){var n=t.deps,r=(e&x)!==0;if(n!==null){var i,l,u=(e&X)!==0,a=r&&o!==null&&!A,s=n.length;if((u||a)&&(o===null||!(o.f&P))){var f=t,h=f.parent;for(i=0;i<s;i++)l=n[i],(u||!l?.reactions?.includes(f))&&(l.reactions??=[]).push(f);u&&(f.f^=X),a&&h!==null&&!(h.f&x)&&(f.f^=x)}for(i=0;i<s;i++)if(l=n[i],it(l)&&At(l),l.wv>t.wv)return!0}(!r||o!==null&&!A)&&E(t,w)}return!1}function Gt(t,e,n=!0){var r=t.reactions;if(r!==null&&!Z?.includes(t))for(var i=0;i<r.length;i++){var l=r[i];l.f&g?Gt(l,e,!1):e===l&&(n?E(l,y):l.f&w&&E(l,M),L(l))}}function Kt(t){var e=d,n=m,r=b,i=c,l=A,u=Z,a=T,s=S,f=t.f;d=null,m=0,b=null,A=(f&x)!==0&&(S||!z||c===null),c=f&(B|I)?null:t,Z=null,tt(t.ctx),S=!1,++lt,t.ac!==null&&(jt(()=>{t.ac.abort(vt)}),t.ac=null);try{t.f|=ct;var h=t.fn,k=h(),p=t.deps;if(d!==null){var v;if(ut(t,m),p!==null&&m>0)for(p.length=m+d.length,v=0;v<d.length;v++)p[m+v]=d[v];else t.deps=p=d;if(!A||f&g&&t.reactions!==null)for(v=m;v<p.length;v++)(p[v].reactions??=[]).push(t)}else p!==null&&m<p.length&&(ut(t,m),p.length=m);if(me()&&b!==null&&!S&&p!==null&&!(t.f&(g|M|y)))for(v=0;v<b.length;v++)Gt(b[v],t);return i!==null&&i!==t&&(lt++,b!==null&&(r===null?r=b:r.push(...b))),t.f&D&&(t.f^=D),k}catch(O){return be(O)}finally{t.f^=ct,d=e,m=n,b=r,c=i,A=l,Z=u,tt(a),S=s}}function Be(t,e){let n=e.reactions;if(n!==null){var r=se.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&e.f&g&&(d===null||!d.includes(e))&&(E(e,M),e.f&(x|X)||(e.f^=X),Mt(e),ut(e,0))}function ut(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Be(t,n[r])}function Q(t){var e=t.f;if(!(e&P)){E(t,w);var n=o,r=z;o=t,z=!0;try{e&at?We(t):Wt(t),zt(t);var i=Kt(t);t.teardown=typeof i=="function"?i:null,t.wv=Vt;var l;bt&&pe&&t.f&y&&t.deps}finally{z=r,o=n}}}function Ve(t){var e=t.f,n=(e&g)!==0;if(c!==null&&!S){var r=o!==null&&(o.f&P)!==0;if(!r&&!Z?.includes(t)){var i=c.deps;if(c.f&ct)t.rv<lt&&(t.rv=lt,d===null&&i!==null&&i[m]===t?m++:d===null?d=[t]:(!A||!d.includes(t))&&d.push(t));else{(c.deps??=[]).push(t);var l=t.reactions;l===null?t.reactions=[c]:l.includes(c)||l.push(c)}}}else if(n&&t.deps===null&&t.effects===null){var u=t,a=u.parent;a!==null&&!(a.f&x)&&(u.f^=x)}if(J){if(F.has(t))return F.get(t);if(n){u=t;var s=u.v;return(!(u.f&w)&&u.reactions!==null||Jt(u))&&(s=ht(u)),F.set(u,s),s}}else if(n){if(u=t,q?.has(u))return q.get(u);it(u)&&At(u)}if(t.f&D)throw t.v;return t.v}function Jt(t){if(t.v===st)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(F.has(e)||e.f&g&&Jt(e))return!0;return!1}function Ye(t){var e=S;try{return S=!0,t()}finally{S=e}}const Ge=-7169;function E(t,e){t.f=t.f&Ge|e}const Ke=new Set,Je=new Set;function Ze(t){for(var e=0;e<t.length;e++)Ke.add(t[e]);for(var n of Je)n(t)}function Qe(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Xe(t,e){var n=o;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function $e(t,e){var n=(e&ue)!==0,r,i=!t.startsWith("<!>");return()=>{r===void 0&&(r=Qe(i?t:"<!>"+t),r=qt(r));var l=n||Fe?document.importNode(r,!0):r.cloneNode(!0);return Xe(l,l),l}}function tn(t,e){t!==null&&t.before(e)}function wt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function Zt(t,e){return t===e||t?.[ce]===e}function en(t={},e,n,r){return qe(()=>{var i,l;return je(()=>{i=l,l=[],Ye(()=>{t!==n(...l)&&(e(t,...l),i&&Zt(n(...i),t)&&e(null,...i))})}),()=>{xe(()=>{l&&Zt(n(...l),t)&&e(null,...l)})}}),t}function mt(t,e,n,r){var i=r,l=!0,u=()=>(l&&(l=!1,i=r),i),a;a=t[e],a===void 0&&r!==void 0&&(a=u());var s;return s=()=>{var f=t[e];return f===void 0?u():(l=!0,f)},s}var nn=$e('<div class="p-4 bg-purple-100 rounded-lg border border-purple-300"><h3 class="text-lg font-semibold text-purple-800 mb-2">3D Cube Component</h3> <div class="mb-3"><div class="w-64 h-64 bg-gray-900 rounded-lg overflow-hidden"></div></div> <div class="flex space-x-2 mb-3"><button class="px-3 py-1 bg-purple-500 text-white rounded hover:bg-purple-600 svelte-hm9wpg">Rotate 45°</button> <button class="px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 svelte-hm9wpg">Toggle Wireframe</button></div> <div class="text-sm text-purple-600 space-y-1"><p> </p> <p> </p> <p> </p></div></div>');function rn(t,e){de(e,!0);let n=mt(e,"size",3,1),r=mt(e,"color",3,"#ff6b6b"),i=mt(e,"rotation_speed",3,.01),l,u,a,s,f,h;R.onMount(()=>{k(),p()}),R.onDestroy(()=>{h&&cancelAnimationFrame(h),s&&s.dispose()});function k(){u=new C.Scene,a=new C.PerspectiveCamera(75,l.clientWidth/l.clientHeight,.1,1e3),a.position.z=5,s=new C.WebGLRenderer({antialias:!0,alpha:!0}),s.setSize(l.clientWidth,l.clientHeight),s.setClearColor(0,0),l.appendChild(s.domElement);const gt=new C.BoxGeometry(n(),n(),n()),_n=new C.MeshBasicMaterial({color:r(),wireframe:!1});f=new C.Mesh(gt,_n),u.add(f);const hn=new C.AmbientLight(16777215,.6);u.add(hn);const re=new C.DirectionalLight(16777215,.8);re.position.set(10,10,5),u.add(re),window.addEventListener("resize",v)}function p(){h=requestAnimationFrame(p),f&&(f.rotation.x+=i(),f.rotation.y+=i()),s.render(u,a)}function v(){a&&s&&l&&(a.aspect=l.clientWidth/l.clientHeight,a.updateProjectionMatrix(),s.setSize(l.clientWidth,l.clientHeight))}function O(){f&&(f.rotation.x+=Math.PI/4,f.rotation.y+=Math.PI/4)}function ln(){f&&f.material&&(f.material.wireframe=!f.material.wireframe)}var Qt=nn(),Xt=j(N(Qt),2),un=N(Xt);en(un,gt=>l=gt,()=>l);var $t=j(Xt,2),te=N($t);te.__click=O;var sn=j(te,2);sn.__click=ln;var fn=j($t,2),ee=N(fn),an=N(ee),ne=j(ee,2),on=N(ne),cn=j(ne,2),vn=N(cn);ze(()=>{wt(an,`Size: ${n()??""}`),wt(on,`Color: ${r()??""}`),wt(vn,`Rotation Speed: ${i()??""}`)}),tn(t,Qt),we()}return Ze(["click"]),rn});
